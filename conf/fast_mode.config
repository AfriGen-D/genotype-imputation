/*
========================================================================================
    FAST MODE CONFIGURATION
    Optimized settings for maximum speed with essential QC only
========================================================================================
*/

params {
    // Enable minimal QC mode
    minimal_qc_mode            = true
    
    // Skip non-essential validation steps
    skip_vcf_stats             = true
    skip_chr_validation        = true
    skip_ref_compatibility     = true
    skip_sample_overlap        = true
    
    // Skip non-essential QC steps
    skip_missingness_calc      = true
    skip_hwe_check            = true
    skip_annotation           = true
    
    // Aggressive chunking for parallel processing
    qc_chunk_variants          = 25000   // Smaller chunks for more parallelization
    
    // Essential QC only
    remove_duplicates          = true    // Keep this - essential
    split_multiallelic         = true    // Keep this - essential for imputation
    
    // Relaxed filtering thresholds for speed
    qc_min_ac                  = 1       // Less strict
    qc_min_maf                 = 0.001   // Less strict  
    qc_max_missing             = 0.1     // Less strict
    
    // Skip reporting features
    generate_plots             = false
    concordance_analysis       = false
    report_level               = 'summary'
}

// Process-specific optimizations
process {
    // Increase CPU allocation for critical processes
    withName: 'FILTER_VARIANTS|SPLIT_MULTIALLELIC|REMOVE_DUPLICATES' {
        cpus = 4
        memory = '8.GB'
    }
    
    // Reduce resources for skipped processes
    withName: 'CALCULATE_MISSINGNESS|CHECK_HWE|ANNOTATE_VARIANTS' {
        cpus = 1
        memory = '2.GB'
        ext.when = false  // Skip these processes
    }
    
    // Optimize chunk processing
    withName: 'SPLIT_VCF_CHUNKS|MERGE_VCF_CHUNKS' {
        cpus = 2
        memory = '4.GB'
    }
}

// Executor settings for maximum parallelization
executor {
    queueSize = 100
    submitRateLimit = '50/1min'
}